version: "3.1"

# ============================================================================
# INTENTS - 29 Core Intents for E-commerce Fashion Chatbot
# Based on specification: 02_INTENT_LOGIC_TABLE.md
# ============================================================================
intents:
  # ===== GREETINGS & BASIC =====
  - greet
  - goodbye
  - thank_you
  - affirm
  - deny
  
  # ===== PRODUCT SEARCH & INQUIRY =====
  - search_product
  - ask_product_price
  - check_product_availability
  - ask_product_details
  
  # ===== CART & PURCHASE =====
  - add_to_cart
  - view_cart
  - remove_from_cart
  
  # ===== ORDER MANAGEMENT =====
  - track_order
  - check_delivery_status
  - cancel_order
  - modify_order
  
  # ===== POLICIES & FAQ =====
  - ask_shipping_policy
  - ask_return_policy
  - ask_payment_methods
  - ask_warranty
  
  # ===== RECOMMENDATIONS =====
  - ask_recommendation
  - compare_products
  
  # ===== SUPPORT =====
  - create_support_ticket
  - ask_contact_info
  
  # ===== CHITCHAT =====
  - bot_challenge
  
  # ===== FASHION SPECIFIC =====
  - ask_size_guide
  - ask_material
  - ask_available_colors
  - ask_promotions
  - ask_delivery_time
  - ask_fit_style
  - ask_styling_advice
  - search_by_occasion
  - compare_product_details
  - ask_reviews
  
  # ===== ADVANCED FASHION =====
  - ask_sizing_advice
  - ask_product_care
  - report_order_error
  - request_exchange_item
  - report_quality_issue
  - request_policy_exception
  - request_stock_notification_conditional
  - check_discount_logic
  - ask_product_comparison_contextual
  
  # ===== OPEN-ENDED QUERIES (Gemini AI) =====
  - open_ended_query
  - ask_advice
  - ask_general_question
  
  # ===== SYSTEM =====
  - nlu_fallback
  - inform
  - inform_size
  - inform_color
  - inform_quantity
  - search_by_price

# ============================================================================
# ENTITIES - Information extracted from user messages  
# ============================================================================
entities:
  # Product-related
  - product_name              # T√™n s·∫£n ph·∫©m
  - product_type              # Lo·∫°i s·∫£n ph·∫©m (synonym: category)
  - category                  # Danh m·ª•c (√°o, qu·∫ßn, gi√†y)
  - brand                     # Th∆∞∆°ng hi·ªáu
  - color                     # M√†u s·∫Øc
  - size                      # Size (S, M, L, XL)
  - material                  # Ch·∫•t li·ªáu (cotton, polyester)
  - price_range               # Kho·∫£ng gi√°
  - min_price                 # Gi√° t·ªëi thi·ªÉu
  - max_price                 # Gi√° t·ªëi ƒëa
  
  # Order-related
  - order_id                  # M√£ ƒë∆°n h√†ng
  - order_number              # S·ªë ƒë∆°n h√†ng (synonym)
  - quantity                  # S·ªë l∆∞·ª£ng
  
  # Customer measurements
  - height                    # Chi·ªÅu cao
  - weight                    # C√¢n n·∫∑ng
  - body_type                 # D√°ng ng∆∞·ªùi
  
  # Context & Occasion
  - context                   # Ng·ªØ c·∫£nh (wedding, beach, work, party, casual, sport)
  - occasion                  # D·ªãp (synonym: context)
  
  # Information types
  - info_type                 # Lo·∫°i th√¥ng tin c·∫ßn h·ªèi (material, price, origin)
  
  # Feedback & Issues
  - issue_type                # Lo·∫°i v·∫•n ƒë·ªÅ (damaged, wrong_item, attitude)
  - reason                    # L√Ω do

# ============================================================================
# SLOTS - Variables to store conversation context
# Based on specification: 03_DATA_FLOW.md
# ============================================================================
slots:
  # ===== SESSION & USER CONTEXT =====
  customer_id:
    type: float
    influence_conversation: false
    mappings:
    - type: custom
  
  visitor_id:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  
  session_id:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  
  user_jwt_token:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  
  # ===== PRODUCT CONTEXT =====
  products_found:
    type: bool
    initial_value: false
    influence_conversation: true
    mappings:
    - type: custom
  
  last_search_query:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  
  last_products:
    type: list
    influence_conversation: false
    mappings:
    - type: custom
  
  current_product_id:
    type: float
    influence_conversation: false
    mappings:
    - type: custom
  
  current_variant_id:
    type: float
    influence_conversation: false
    mappings:
    - type: custom
  
  # ===== SLOT FILLING FOR CART =====
  cart_size:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: size
      intent:
        - inform_size
        - add_to_cart
    - type: custom
  
  cart_color:
    type: text
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: color
      intent:
        - inform_color
        - add_to_cart
    - type: custom
  
  cart_quantity:
    type: float
    initial_value: 1
    influence_conversation: false
    mappings:
    - type: from_entity
      entity: quantity
      intent:
        - inform_quantity
        - add_to_cart
    - type: custom
  
  # ===== ORDER CONTEXT =====
  last_order_id:
    type: float
    influence_conversation: false
    mappings:
    - type: custom
  
  last_order:
    type: any
    influence_conversation: false
    mappings:
    - type: custom
  
  # ===== CONVERSATION CONTEXT =====
  context:
    type: text
    influence_conversation: false
    mappings:
    - type: custom
  
  # ===== FALLBACK TRACKING =====
  fallback_count:
    type: float
    initial_value: 0
    influence_conversation: true
    mappings:
    - type: custom

# ============================================================================
# RESPONSES - Template responses from the bot
# ============================================================================
responses:
  # Greetings & Farewells
  utter_greet:
  - text: "Welcome to LeCas! üëã I'm here to help you discover casually elegant menswear. What can I assist you with today?"
  - text: "Hello! Looking for premium menswear? I'm your LeCas shopping assistant. How can I help?"
  - text: "Welcome to LeCas - Casually Elegant Every Moment. Feel free to ask about products or styling advice!"
  
  utter_goodbye:
  - text: "Thank you for visiting LeCas! Stay casually elegant. üòä"
  - text: "See you soon at LeCas! Remember - Casually Elegant Every Moment. ‚ú®"
  - text: "Thanks for chatting! Feel free to reach out anytime you need style advice or assistance."
  
  utter_you_are_welcome:
  - text: "My pleasure! Anything else I can help with?"
  - text: "Absolutely! Is there anything else you'd like to know?"
  - text: "Happy to help! Let me know if you need anything else."
  
  # Bot Identity
  utter_i_am_bot:
  - text: "I'm LeCas Virtual Shopping Assistant - here to help you discover premium menswear and answer your questions!"
  - text: "Yes, I'm an AI assistant! But I'm here to make your shopping experience effortlessly elegant. How can I help?"
  
  # Product-related responses
  utter_no_products_found:
  - text: "I couldn't find any products matching your search. Would you like to try different keywords or browse by category?"
  - text: "Sorry, no matches found. Could you describe what you're looking for in different words?"
  
  utter_ask_product_specification:
  - text: "What specific features or specifications are you looking for?"
  - text: "Could you tell me more about what you need? Size, color, brand?"
  
  utter_help_order:
  - text: "Ready to order? I can guide you through the checkout process or answer any questions first!"
  - text: "Would you like to proceed with your order, or do you have more questions?"
  
  # Order-related responses
  utter_ask_order_number:
  - text: "Could you please provide your order number? It usually starts with '#' followed by numbers."
  - text: "What's your order number? You can find it in your confirmation email."
  
  utter_order_cancellation_confirmed:
  - text: "Your cancellation request has been submitted. Our team will process it within 24 hours."
  
  # Policy responses (fallback if API fails)
  utter_default_shipping_policy:
  - text: "Best of all, we offer free shipping on all domestic orders in Vietnam! üöö\n‚Ä¢ Major Cities (Hanoi, HCMC, Da Nang): 1-2 business days\n‚Ä¢ Nationwide: 3-5 business days\n\nFor international shipping, we deliver to over 50 countries!"
  
  utter_default_return_policy:
  - text: "Our policy is simple: You have 30 days for a full refund if the item is unworn/unwashed and in original condition. Refunds are processed within 5-7 business days once we receive your return. (Shipping costs are non-refundable.)"
  
  # Support responses
  utter_contact_info:
  - text: "Please don't worry, we are here to help! You can reach our Customer Support team through this chat, and we'll handle your request promptly. üòä"
  - text: "Our team is ready to assist you! Just describe your issue here with your order number, and we'll receive it immediately to resolve it quickly for you!"
  
  # Fashion E-commerce Responses (NEW)
  utter_size_guide:
  - text: "üìè Size Guide:\n‚Ä¢ S: 50-55kg, 160-165cm\n‚Ä¢ M: 55-65kg, 165-172cm\n‚Ä¢ L: 65-75kg, 172-178cm\n‚Ä¢ XL: 75-85kg, 178cm+\n\nWould you like personalized sizing advice? üòä"
  - text: "To choose the right size:\n1Ô∏è‚É£ Measure height & weight\n2Ô∏è‚É£ Check size chart\n3Ô∏è‚É£ If between sizes, size up\n\nNeed specific size advice?"
  
  utter_material_info:
  - text: "This product is made from premium, breathable, and durable materials. Which specific product would you like details about?"
  - text: "We have various materials: 100% Cotton, Polyester, Blends... Which product are you checking? üëï"
  
  utter_colors_available:
  - text: "This product comes in: Black, White, Gray, Navy. Which color do you prefer? üé®"
  - text: "Let me check which colors are in stock! Which product are you viewing?"
  
  utter_promotions_info:
  - text: "üéâ Current promotions:\n‚Ä¢ 20% off orders over $50\n‚Ä¢ Free shipping over $30\n‚Ä¢ Loyalty points rewards\n\nUse code: FASHION20 at checkout!"
  - text: "Hot sale now! üî•\n- Up to 30% off selected items\n- 3-piece combo 25% off\n- Free nationwide shipping\n\nShop now before they're gone! üòä"
  
  utter_delivery_info:
  - text: "‚è∞ Delivery time:\n‚Ä¢ City: 1-2 days\n‚Ä¢ Suburbs: 2-4 days\n‚Ä¢ Provinces: 3-5 days\n\nWe ship super fast! üöö"
  - text: "Fast delivery! Usually 2-3 days. Order today, wear this weekend! üòé"
  
  utter_ask_delivery_options:
  - text: |
      üöö **Delivery Options**
      
      **Standard Delivery**
      ‚Ä¢ 3-5 Business Days
      ‚Ä¢ Free (Domestic)
      
      **Express Delivery**
      ‚Ä¢ 1-2 Business Days
      ‚Ä¢ $15.99
      
      **Next Day Delivery**
      ‚Ä¢ Order by 2PM
      ‚Ä¢ $24.99
      
      We ship nationwide across Vietnam with free domestic delivery.
      International shipping is also available to selected regions.
  
  utter_delivery_international:
  - text: |
      üåç **International Shipping**
      
      **Asia** (Thailand, Singapore, Malaysia, etc.)
      ‚Ä¢ 5-7 business days - $8.99
      
      **Rest of the world**
      ‚Ä¢ 10-14 business days - $15.99
      
      Express international shipping available upon request.
      
      Note: Customs duties and taxes may apply depending on your country's regulations.
  
  utter_fit_info:
  - text: "This is regular fit - not too loose or tight. Suits all body types! üëî"
  - text: "We have all fits: Slim fit (fitted), Regular (standard), Oversize (loose). What's your style?"
  
  utter_styling_advice:
  - text: "‚ú® Styling suggestions:\n‚Ä¢ Polo + chinos = Office smart\n‚Ä¢ T-shirt + jeans = Casual street\n‚Ä¢ Dress shirt + slacks = Event elegant\n\nWhat occasion?"
  - text: "I recommend pairing this with:\nüîπ Black/navy jeans\nüîπ White sneakers\nüîπ Add watch/bracelet for trend!\n\nWant to see outfit samples? üì∏"
  
  utter_occasion_suggestions:
  - text: "For work, choose:\nüëî Polo, dress shirts\nüëñ Chinos, slacks\nüëû Leather/loafers\n\nNeed specific recommendations?"
  - text: "Outfit by occasion:\n‚Ä¢ Work: Smart casual\n‚Ä¢ Hangout: Streetwear\n‚Ä¢ Date: Neat & clean\n‚Ä¢ Travel: Comfortable\n\nWhat occasion?"
  
  utter_product_comparison:
  - text: "Let me compare products for you! Which two items are you deciding between?"
  - text: "Sure! Tell me which 2 products to compare for price/quality/style analysis!"
  
  utter_reviews_info:
  - text: "This product is highly rated! ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n‚Ä¢ Great quality\n‚Ä¢ Perfect fit\n‚Ä¢ Fair price\n\nMany customers love it!"
  - text: "Customer reviews:\nüíØ Good quality\nüíØ True to size\nüíØ Color as shown\n\nOrder with confidence! üòä"
  
  # Support responses
  utter_support_ticket_created:
  - text: "Support ticket created successfully! üé´\nOur team will contact you within 24h. Thank you for your patience!"
  - text: "Your ticket has been recorded! ‚úÖ\nSupport team will process and respond ASAP. Thank you!"
  
  # Clarification responses
  utter_ask_rephrase:
  - text: "I'm not sure I understood that correctly. Could you rephrase your question?"
  - text: "Could you explain that in different words? I want to make sure I help you correctly."
  
  utter_default:
  - text: "I can help you with product searches, order tracking, shipping policies, and more. What would you like to know?"

# ============================================================================
# ACTIONS - Custom actions implemented in actions.py
# Mapped to 29 intents according to specification
# ============================================================================
actions:
  # ===== PRODUCT SEARCH & INQUIRY =====
  - action_search_products
  - action_search_by_price
  - action_get_product_price
  - action_check_availability
  - action_get_product_details
  - action_get_product_info
  - action_check_stock
  - action_get_promotions
  
  # ===== SIZE & CONSULTATION =====
  - action_get_size_chart
  - action_get_sizing_advice
  - action_get_styling_advice
  - action_get_product_care
  
  # ===== RECOMMENDATIONS =====
  - action_recommend_products
  - action_recommend_by_context
  - action_compare_products
  
  # ===== CART & PURCHASE =====
  - action_add_to_cart
  - action_view_cart
  - action_buy_now
  - action_add_to_wishlist
  
  # ===== ORDER MANAGEMENT =====
  - action_track_order
  - action_get_delivery_status
  - action_cancel_order
  - action_cancel_order_request
  - action_report_order_error
  - action_request_return_or_exchange
  - action_report_quality_issue
  - action_create_feedback_ticket
  
  # ===== POLICIES & FAQ =====
  - action_get_shipping_policy
  - action_get_return_policy
  - action_get_payment_methods
  - action_get_warranty_policy
  - action_handle_policy_exception
  
  # ===== SUPPORT =====
  - action_create_support_ticket
  - action_set_stock_notification
  - action_check_discount
  
  # ===== FALLBACK & AI =====
  - action_ask_gemini
  - action_ask_gemini_with_history
  - action_fallback
  
  # ===== UTILITY ACTIONS =====
  - action_default_ask_affirmation
  - action_reset_slots

# ============================================================================
# FORMS - Slot Filling for Cart/Purchase Flow
# ============================================================================
forms:
  product_cart_form:
    required_slots:
      - current_product_id
      - cart_size
      - cart_color
      - cart_quantity

# ============================================================================
# SESSION CONFIGURATION
# ============================================================================
session_config:
  session_expiration_time: 60  # 60 minutes
  carry_over_slots_to_new_session: true
